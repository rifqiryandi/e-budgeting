(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21931cda"],{"05cb":function(e,t,a){"use strict";a.r(t);var r=a("7a23");const n={class:"row"},o={class:"col-12"},l={class:"card"},i={class:"card-body"},s=Object(r["createElementVNode"])("h3",{style:{"font-weight":"500"}},"Pencarian",-1),c=Object(r["createElementVNode"])("hr",null,null,-1),d={class:"grid grid-cols-1 gap-2"},g={class:""},b=Object(r["createElementVNode"])("label",{class:"block mb-2 text-base font-medium text-gray-900 dark:text-white"}," Sub Mata Anggaran ",-1),m=Object(r["createElementVNode"])("option",{value:""},"-- Pilih Sub Mata Anggaran --",-1),u=["value"],h={class:"row"},p={class:"col-12 d-flex justify-content-end"},k=Object(r["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24"},[Object(r["createElementVNode"])("path",{d:"M450.001-450.001h-230v-59.998h230v-230h59.998v230h230v59.998h-230v230h-59.998v-230Z"})],-1),j={class:"row mt-3"},O={class:"col-12"},f={class:"card"},x={class:"card-body"},w={class:"d-flex justify-content-end"},y={class:"p-input-icon-left"},v=Object(r["createElementVNode"])("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),V={key:0,class:"label-nonAktif"},N={key:1,class:"label-Aktif"},E={style:{"font-weight":"600"}},_={style:{"font-weight":"600"}},S={style:{"font-weight":"600"}},D={style:{"font-weight":"600"}},A={style:{color:"green"}},M={id:"input-modal",tabindex:"-1",class:"fixed top-0 left-0 right-0 mb-8 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full"},P={class:"relative w-full max-w-4xl max-h-full"},B={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},C={class:"flex items-center justify-between p-3 border-b rounded-t dark:border-gray-600 bg-bni-orange"},T=Object(r["createElementVNode"])("h3",{class:"text-xl font-medium",style:{color:"#fff"}}," Tambah Proyeksi Kegiatan ",-1),F=Object(r["createElementVNode"])("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[Object(r["createElementVNode"])("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),I=Object(r["createElementVNode"])("span",{class:"sr-only"},"Close modal",-1),L=[F,I],$={class:"p-6 space-y-2"},K={class:""},U=Object(r["createElementVNode"])("label",{class:"block mb-2 text-base font-medium text-gray-900 dark:text-white"},[Object(r["createTextVNode"])(" Sub Mata Anggaran "),Object(r["createElementVNode"])("span",{class:"text-red-600"},"*")],-1),R=Object(r["createElementVNode"])("option",{value:""},"-- Pilih Anggaran --",-1),q=["value"],z={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-500 m-0"},G={class:""},J=Object(r["createElementVNode"])("label",{class:"block mb-2 text-base font-medium text-gray-900 dark:text-white"}," Sisa Anggaran ",-1),W={class:""},Z=Object(r["createElementVNode"])("label",{class:"block mb-2 text-base font-medium text-gray-900 dark:text-white"},[Object(r["createTextVNode"])(" Kegiatan "),Object(r["createElementVNode"])("span",{class:"text-red-600"},"*")],-1),H={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-500 m-0"},Q={class:""},X=Object(r["createElementVNode"])("label",{class:"block mb-2 text-base font-medium text-gray-900 dark:text-white"},[Object(r["createTextVNode"])(" Bulan "),Object(r["createElementVNode"])("span",{class:"text-red-600"},"*")],-1),Y={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-500 m-0"},ee={class:""},te=Object(r["createElementVNode"])("label",{class:"block mb-2 text-base font-medium text-gray-900 dark:text-white"},[Object(r["createTextVNode"])(" Nominal "),Object(r["createElementVNode"])("span",{class:"text-red-600"},"*")],-1),ae={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-500 m-0"},re={class:"flex items-center justify-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"};function ne(e,t,a,F,I,ne){const oe=Object(r["resolveComponent"])("InputText"),le=Object(r["resolveComponent"])("Column"),ie=Object(r["resolveComponent"])("DataTable"),se=Object(r["resolveComponent"])("InputNumber"),ce=Object(r["resolveComponent"])("VueDatePicker");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("div",n,[Object(r["createElementVNode"])("div",o,[Object(r["createElementVNode"])("div",l,[Object(r["createElementVNode"])("div",i,[s,c,Object(r["createElementVNode"])("div",d,[Object(r["createElementVNode"])("div",g,[b,Object(r["withDirectives"])(Object(r["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>I.filters.kdsubmatanggaran=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-base rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[m,(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(ne.getSMataAnggaran,(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("option",{key:t,value:e.kode_sub_mata_anggaran},Object(r["toDisplayString"])(e.nama_sub_mata_anggaran),9,u))),128))],512),[[r["vModelSelect"],I.filters.kdsubmatanggaran]])])]),Object(r["createElementVNode"])("button",{class:"btn w-full mt-3",style:{"border-radius":"6px",background:"#006699",color:"#ffff",height:"48px","padding-top":"11px","padding-bottom":"11px"},onClick:t[1]||(t[1]=(...e)=>ne.cariData&&ne.cariData(...e))}," Tampilkan ")])])])]),Object(r["createElementVNode"])("div",h,[Object(r["createElementVNode"])("div",p,[Object(r["createElementVNode"])("button",{class:"btn d-flex btn-add",onClick:t[2]||(t[2]=(...e)=>ne.showInput&&ne.showInput(...e))},[k,Object(r["createTextVNode"])(" Tambah Data ")])])]),Object(r["createElementVNode"])("div",j,[Object(r["createElementVNode"])("div",O,[Object(r["createElementVNode"])("div",f,[Object(r["createElementVNode"])("div",x,[Object(r["createVNode"])(ie,{value:ne.getAllData,lazy:"",paginator:"",totalRecords:I.pagination.totaldata,rows:I.pagination.perPage,rowsPerPageOptions:[5,10,20,50],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",tableStyle:"min-width: 50rem",filters:I.filters,"onUpdate:filters":t[4]||(t[4]=e=>I.filters=e),loading:I.loading,onPage:t[5]||(t[5]=e=>ne.paginationTable(e))},{header:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",w,[Object(r["createElementVNode"])("span",y,[v,Object(r["createVNode"])(oe,{modelValue:I.filters.cari,"onUpdate:modelValue":t[3]||(t[3]=e=>I.filters.cari=e),onInput:ne.cariData,placeholder:"Search"},null,8,["modelValue","onInput"])])])]),empty:Object(r["withCtx"])(()=>[Object(r["createTextVNode"])(" No Data found. ")]),loading:Object(r["withCtx"])(()=>[Object(r["createTextVNode"])(" Loading data. Please wait. ")]),default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(le,{field:"",header:"Status",style:{"min-width":"220px !important"}},{body:Object(r["withCtx"])(({data:e})=>[0==e.status_kegiatan?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",V," Belum di validasi ")):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",N,"Tervalidasi"))]),_:1}),Object(r["createVNode"])(le,{field:"nama_kelompok_mata_anggaran",header:"Kelompok Mata Anggaran",style:{"min-width":"240px !important"}},{body:Object(r["withCtx"])(({data:e})=>[Object(r["createElementVNode"])("div",E,Object(r["toDisplayString"])(e.nama_kelompok_mata_anggaran),1)]),_:1}),Object(r["createVNode"])(le,{field:"nama_mata_anggaran",header:"Mata Anggaran",style:{"min-width":"180px !important"}},{body:Object(r["withCtx"])(({data:e})=>[Object(r["createElementVNode"])("div",_,Object(r["toDisplayString"])(e.nama_mata_anggaran),1)]),_:1}),Object(r["createVNode"])(le,{field:"nama_sub_mata_anggaran",header:"Sub Mata Anggaran",style:{"min-width":"200px !important"}},{body:Object(r["withCtx"])(({data:e})=>[Object(r["createElementVNode"])("div",S,Object(r["toDisplayString"])(e.nama_sub_mata_anggaran),1)]),_:1}),Object(r["createVNode"])(le,{field:"kegiatan",header:"Kegiatan",style:{"min-width":"220px !important"}},{body:Object(r["withCtx"])(({data:e})=>[Object(r["createElementVNode"])("div",D,Object(r["toDisplayString"])(e.kegiatan),1)]),_:1}),Object(r["createVNode"])(le,{field:"Waktu Kegiatan",header:"Bulan",style:{"min-width":"180px !important"}},{body:Object(r["withCtx"])(({data:e})=>[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.bulan+" - "+e.tahun),1)]),_:1}),Object(r["createVNode"])(le,{field:"",header:"Nominal Kegiatan",class:"text-right",style:{"min-width":"220px !important"}},{body:Object(r["withCtx"])(({data:e})=>[Object(r["createElementVNode"])("div",A,Object(r["toDisplayString"])(e.nonimal_anggaran.toLocaleString("de-DE")),1)]),_:1})]),_:1},8,["value","totalRecords","rows","filters","loading"])])])])]),Object(r["createElementVNode"])("div",M,[Object(r["createElementVNode"])("div",P,[Object(r["createElementVNode"])("div",B,[Object(r["createElementVNode"])("div",C,[T,Object(r["createElementVNode"])("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:t[6]||(t[6]=(...e)=>ne.hideModal&&ne.hideModal(...e))},L)]),Object(r["createElementVNode"])("div",$,[Object(r["createElementVNode"])("div",K,[U,Object(r["withDirectives"])(Object(r["createElementVNode"])("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>I.Form.id_anggaran=e),onChange:t[8]||(t[8]=(...e)=>ne.setPreview&&ne.setPreview(...e)),class:"bg-gray-50 border border-gray-300 text-gray-900 text-base rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[R,(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(ne.getAnggaran,(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("option",{key:t,value:e},Object(r["toDisplayString"])(e.nama_sub_mata_anggaran),9,q))),128))],544),[[r["vModelSelect"],I.Form.id_anggaran]]),this.v$.Form.id_anggaran.$error?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",z," Anggaran tidak boleh kosong! ")):Object(r["createCommentVNode"])("",!0)]),Object(r["createElementVNode"])("div",G,[J,Object(r["createVNode"])(se,{modelValue:I.preview.nominal_sisa,"onUpdate:modelValue":t[9]||(t[9]=e=>I.preview.nominal_sisa=e),placeholder:"Masukkan Sisa anggaran",class:"w-full",disabled:""},null,8,["modelValue"])]),Object(r["createElementVNode"])("div",W,[Z,Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text",id:"base-input","onUpdate:modelValue":t[10]||(t[10]=e=>I.Form.kegiatan=e),placeholder:"Masukkan Kegiatan",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-bni-blue focus:border-bni-blue block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[r["vModelText"],I.Form.kegiatan]]),this.v$.Form.kegiatan.$error?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",H," Kegiatan tidak boleh kosong! ")):Object(r["createCommentVNode"])("",!0)]),Object(r["createElementVNode"])("div",Q,[X,Object(r["createVNode"])(ce,{placeholder:"Pilih Bulan",modelValue:I.Form.bulan,"onUpdate:modelValue":t[11]||(t[11]=e=>I.Form.bulan=e),format:"MMMM/yyyy","auto-apply":"","month-picker":""},null,8,["modelValue"]),this.v$.Form.bulan.$error?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",Y," Bulan tidak boleh kosong! ")):Object(r["createCommentVNode"])("",!0)]),Object(r["createElementVNode"])("div",ee,[te,Object(r["createVNode"])(se,{modelValue:I.Form.nominal,"onUpdate:modelValue":t[12]||(t[12]=e=>I.Form.nominal=e),placeholder:"Masukkan Nominal",class:"w-full",onInput:ne.validationNominal},null,8,["modelValue","onInput"]),this.v$.Form.nominal.$error?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",ae," Nominal tidak boleh kosong! ")):Object(r["createCommentVNode"])("",!0)])]),Object(r["createElementVNode"])("div",re,[Object(r["createElementVNode"])("button",{type:"button",onClick:t[13]||(t[13]=(...e)=>ne.prosesInput&&ne.prosesInput(...e)),class:"bg-bni-blue text-white focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-base px-5 py-2.5 text-center"}," SIMPAN "),Object(r["createElementVNode"])("button",{onClick:t[14]||(t[14]=(...e)=>ne.hideModal&&ne.hideModal(...e)),type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"}," TUTUP ")])])])])],64)}a("b7ef");var oe=a("3822"),le=a("5b2c"),ie=a("6f85"),se=a("8398"),ce=a("8d31"),de=a("c3b3"),ge=a("b9fb"),be=a("5141"),me=(a("1465"),a("0ba9")),ue=a("c416"),he=a("c055"),pe={name:"Kegiatan",data(){return{v$:Object(de["a"])(),token:sessionStorage.getItem("token"),modal:null,ListKegiatan:null,rowSMataAnggaran:null,rowDepartemen:null,rowAnggaran:null,filters:{kdsubmatanggaran:"",kddepartemen:"",cari:"",status:""},pagination:{perPage:5,currentPage:1,totaldata:0},Form:{id_anggaran:"",kegiatan:"",nominal:"",bulan:"",userid:""},preview:{nominal_sisa:""},loading:!0,userSession:JSON.parse(atob(sessionStorage.getItem("dataUser")))}},validations(){return{Form:{id_anggaran:{required:ge["d"]},kegiatan:{required:ge["d"]},nominal:{required:ge["d"]},bulan:{required:ge["d"]},userid:{required:ge["d"]}}}},components:{DataTable:le["a"],Column:ie["a"],InputText:se["a"],InputNumber:oe["a"],VueDatePicker:be["a"]},computed:{getAllData(){return this.ListKegiatan},getSMataAnggaran(){return this.rowSMataAnggaran},getDepartemen(){return this.rowDepartemen},getAnggaran(){return this.rowAnggaran}},methods:{cariData(){this.refreshListTable(1)},setPreview(){this.preview.nominal_sisa=this.Form.id_anggaran.sisa_nominal_pengajaun},validationNominal(e){e.value>this.preview.nominal_sisa&&this.$swal({icon:"info",title:"INFO",text:"Nominal tidak boleh lebih dari sisa anggaran",confirmButtonColor:"#e77817"})},filterShow(){this.pagination.currentPage=1,this.refreshListTable()},paginationTable(e){this.pagination.perPage=e.rows,this.pagination.currentPage==e.page?this.pagination.currentPage++:this.pagination.currentPage-e.page==1?this.pagination.currentPage--:this.pagination.currentPage=e.page+1,this.refreshListTable()},async getAllAnggaran(){let e={idanggaran:"",status:2,kddepartemen:this.userSession.departemen,idanggaranawal:"",kdmatanggaran:""};try{let t=await me["a"].getIdAnggaran(e,this.token);this.rowAnggaran=t.data.data}catch(t){console.log(t)}},async getAllDepartemen(){let e={};try{let t=await he["a"].getDataDepartemen(e,this.token);this.rowDepartemen=t.data.data}catch(t){this.$swal({icon:"error",title:"GAGAL",text:t.response.data.Msg,confirmButtonColor:"#e77817"})}},async getSubMataAnggaran(){let e={};try{let t=await ue["a"].getDataSubMataAnggaran(e,this.token);this.rowSMataAnggaran=t.data.data}catch(t){this.rowSMataAnggaran=null,console.log(t)}},showInput(){this.Form={id_anggaran:"",kegiatan:"",nominal:"",userid:""},this.preview={nominal_sisa:""};const e=document.getElementById("input-modal");this.modal=new ce["a"](e),this.modal.show()},async getData(){this.loading=!0;let e={kdsubmatanggaran:this.filters.kdsubmatanggaran,kddepartemen:this.userSession.departemen,status:"",perPage:this.pagination.perPage,currentPage:this.pagination.currentPage,cari:this.filters.cari};try{let t=await me["a"].listKegiatan(e,this.token);this.pagination.totaldata=t.data.data.total_data,this.ListKegiatan=t.data.data.data,this.loading=!1}catch(t){this.ListKegiatan=null,this.loading=!1,console.log(t)}},async prosesInput(){let e=this.Form;if(e.nominal>this.preview.nominal_sisa)return this.$swal({icon:"info",title:"INFO",text:"Nominal tidak boleh lebih dari sisa anggaran",confirmButtonColor:"#e77817"});if(e.userid=this.userSession.username,this.v$.$validate(),!this.v$.$error){e.id_anggaran=this.Form.id_anggaran.id;let a=this.Form.bulan.month+1;e.bulan=a>=10?a.toString():"0"+a.toString();try{let t=await me["a"].inputKegiatan(e,this.token);this.modal.hide(),this.$swal({icon:"success",title:"Berhasil",text:t.data.Msg,confirmButtonColor:"#e77817"}),this.Form={id_anggaran:"",kegiatan:"",nominal:"",userid:""},this.refreshListTable(),this.getAllAnggaran()}catch(t){this.$swal({icon:"error",title:"Gagal",text:t.response.data.Msg,confirmButtonColor:"#e77817"})}}},hideModal(){this.modal.hide()},refreshListTable(e=0){0!=e&&(this.pagination.currentPage=1),this.getData()}},mounted(){Object(ce["b"])(),this.getData(),this.getAllDepartemen(),this.getSubMataAnggaran(),this.getAllAnggaran()}},ke=(a("7321"),a("6b0d")),je=a.n(ke);const Oe=je()(pe,[["render",ne]]);t["default"]=Oe},"17c6":function(e,t,a){},7321:function(e,t,a){"use strict";a("17c6")},c055:function(e,t,a){"use strict";var r=a("7ba7");class n{getDataDepartemen(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/getdepartemen",e,a)}tambahDataDepartemen(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/insdepartemen",e,a)}updateDepartemen(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/updatedepartemen",e,a)}deleteDepartemen(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/deldepartemen",e,a)}ubahStatus(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/updatestatusdepart",e,a)}}t["a"]=new n},c416:function(e,t,a){"use strict";var r=a("7ba7");class n{getDataSubMataAnggaran(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/getsubmatanggaran",e,a)}tambahDataSubMataAnggaran(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/inssubmatanggaran",e,a)}updateSubMataAnggaran(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/updatesubmatanggaran",e,a)}deleteSubMataAnggaran(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/delsubmatanggaran",e,a)}ubahStatus(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/updatestatusubmatanggaran",e,a)}}t["a"]=new n}}]);
//# sourceMappingURL=chunk-21931cda.95240317.js.map