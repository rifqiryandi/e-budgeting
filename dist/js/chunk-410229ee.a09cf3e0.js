(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-410229ee"],{"37c6":function(e,t,a){var r=a("70bd");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("499e").default;n("52da9f9e",r,!0,{sourceMap:!1,shadowMode:!1})},"4d77":function(e,t,a){"use strict";a("37c6")},"70bd":function(e,t,a){var r=a("24fb");t=r(!1),t.push([e.i,".p-inputnumber input{color:#000!important;background-color:#f9fafb!important;font-size:.875rem;line-height:1.25rem;width:100%!important}.p-inputnumber input:hover{border-color:#dbdee1!important}.p-inputnumber input:focus{border-color:#069!important;box-shadow:none!important}.dp__input_wrap input{color:#000!important;background-color:#f9fafb!important;font-size:.875rem;line-height:1.25rem;width:100%!important;height:46px}.dp__input_wrap input:hover{border-color:#dbdee1!important}.dp__input_wrap input:focus{border-color:#069!important;box-shadow:none!important}",""]),e.exports=t},b424:function(e,t,a){"use strict";a.r(t);var r=a("7a23");const n={class:"row"},o={class:"col-12"},s={class:"card"},i={class:"card-body"},l=Object(r["createElementVNode"])("h3",{style:{"font-weight":"500"}},"Pencarian",-1),c=Object(r["createElementVNode"])("hr",null,null,-1),d={class:"grid grid-cols-1"},u={class:""},g=Object(r["createElementVNode"])("label",{class:"block mb-2 text-base font-medium text-gray-900 dark:text-white"}," Tahun ",-1),b={class:"row"},m={class:"col-12 d-flex justify-content-end"},h=Object(r["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24"},[Object(r["createElementVNode"])("path",{d:"M450.001-450.001h-230v-59.998h230v-230h59.998v230h230v59.998h-230v230h-59.998v-230Z"})],-1),p={class:"row mt-3"},f={class:"col-12"},w={class:"card"},x={class:"card-body"},v={class:"d-flex justify-content-end"},j={class:"p-input-icon-left"},k=Object(r["createElementVNode"])("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),O={id:"input-modal",tabindex:"-1",class:"fixed top-0 left-0 right-0 mb-8 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full"},N={class:"relative w-full max-w-4xl max-h-full"},V={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},y={class:"flex items-center justify-between p-3 border-b rounded-t dark:border-gray-600 bg-bni-orange"},P=Object(r["createElementVNode"])("h3",{class:"text-xl font-medium",style:{color:"#fff"}}," Tambah Persentasi Anggaran ",-1),E=Object(r["createElementVNode"])("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[Object(r["createElementVNode"])("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),A=Object(r["createElementVNode"])("span",{class:"sr-only"},"Close modal",-1),D=[E,A],M={class:"p-6 space-y-2"},S={class:""},C=Object(r["createElementVNode"])("label",{class:"block mb-2 text-base font-medium text-gray-900 dark:text-white"},[Object(r["createTextVNode"])(" Bulan "),Object(r["createElementVNode"])("span",{class:"text-red-600"},"*")],-1),T={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-500 m-0"},F={class:""},I=Object(r["createElementVNode"])("label",{class:"block mb-2 text-base font-medium text-gray-900 dark:text-white"},[Object(r["createTextVNode"])(" Persentasi (%)"),Object(r["createElementVNode"])("span",{class:"text-red-600"},"*")],-1),B={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-500 m-0"},_={class:"flex items-center justify-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"};function L(e,t,a,E,A,L){const $=Object(r["resolveComponent"])("VueDatePicker"),U=Object(r["resolveComponent"])("InputText"),R=Object(r["resolveComponent"])("Column"),z=Object(r["resolveComponent"])("DataTable"),G=Object(r["resolveComponent"])("InputNumber");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("div",n,[Object(r["createElementVNode"])("div",o,[Object(r["createElementVNode"])("div",s,[Object(r["createElementVNode"])("div",i,[l,c,Object(r["createElementVNode"])("div",d,[Object(r["createElementVNode"])("div",u,[g,Object(r["createVNode"])($,{modelValue:A.filters.tahun,"onUpdate:modelValue":t[0]||(t[0]=e=>A.filters.tahun=e),"auto-apply":"","year-picker":""},null,8,["modelValue"])])]),Object(r["createElementVNode"])("button",{class:"btn w-full mt-3",style:{"border-radius":"6px",background:"#006699",color:"#ffff",height:"48px","padding-top":"11px","padding-bottom":"11px"},onClick:t[1]||(t[1]=(...e)=>L.getData&&L.getData(...e))}," Tampilkan ")])])])]),Object(r["createElementVNode"])("div",b,[Object(r["createElementVNode"])("div",m,[Object(r["createElementVNode"])("button",{class:"btn d-flex btn-add",onClick:t[2]||(t[2]=(...e)=>L.showInput&&L.showInput(...e))},[h,Object(r["createTextVNode"])(" Tambah Data ")])])]),Object(r["createElementVNode"])("div",p,[Object(r["createElementVNode"])("div",f,[Object(r["createElementVNode"])("div",w,[Object(r["createElementVNode"])("div",x,[Object(r["createVNode"])(z,{value:L.getAllData,lazy:"",rows:A.pagination.perPage,totalRecords:A.pagination.totaldata,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",tableStyle:"min-width: 50rem",filters:A.filters,"onUpdate:filters":t[4]||(t[4]=e=>A.filters=e),loading:A.loading,onPage:L.paginationTable},{header:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",v,[Object(r["createElementVNode"])("span",j,[k,Object(r["createVNode"])(U,{modelValue:A.filters.cari,"onUpdate:modelValue":t[3]||(t[3]=e=>A.filters.cari=e),onInput:L.cariData,placeholder:"Search"},null,8,["modelValue","onInput"])])])]),empty:Object(r["withCtx"])(()=>[Object(r["createTextVNode"])(" No Data found. ")]),loading:Object(r["withCtx"])(()=>[Object(r["createTextVNode"])(" Loading data. Please wait. ")]),default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(R,{field:"bulan",header:"Bulan",style:{width:"20%"}},{body:Object(r["withCtx"])(({data:e})=>[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.bulan),1)]),_:1}),Object(r["createVNode"])(R,{field:"",header:"Persentasi",style:{width:"20%"}},{body:Object(r["withCtx"])(({data:e})=>[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.presentasi+"%"),1)]),_:1})]),_:1},8,["value","rows","totalRecords","filters","loading","onPage"])])])])]),Object(r["createElementVNode"])("div",O,[Object(r["createElementVNode"])("div",N,[Object(r["createElementVNode"])("div",V,[Object(r["createElementVNode"])("div",y,[P,Object(r["createElementVNode"])("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:t[5]||(t[5]=(...e)=>L.hideModal&&L.hideModal(...e))},D)]),Object(r["createElementVNode"])("div",M,[Object(r["createElementVNode"])("div",S,[C,Object(r["createVNode"])($,{placeholder:"Pilih Bulan",modelValue:A.Form.bulan,"onUpdate:modelValue":t[6]||(t[6]=e=>A.Form.bulan=e),"auto-apply":"","month-picker":""},null,8,["modelValue"]),this.v$.Form.bulan.$error?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",T," Bulan tidak boleh kosong! ")):Object(r["createCommentVNode"])("",!0)]),Object(r["createElementVNode"])("div",F,[I,Object(r["createVNode"])(G,{modelValue:A.Form.presentasi,"onUpdate:modelValue":t[7]||(t[7]=e=>A.Form.presentasi=e),placeholder:"Masukkan Persentasi",class:"w-full",useGrouping:!1,min:0,max:A.batasPersen,onInput:L.calculationNominal},null,8,["modelValue","max","onInput"]),this.v$.Form.presentasi.$error?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",B," Persentasi tidak boleh kosong! ")):Object(r["createCommentVNode"])("",!0)])]),Object(r["createElementVNode"])("div",_,[Object(r["createElementVNode"])("button",{type:"button",onClick:t[8]||(t[8]=(...e)=>L.prosesInput&&L.prosesInput(...e)),class:"bg-bni-blue text-white focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-base px-5 py-2.5 text-center"}," SIMPAN "),Object(r["createElementVNode"])("button",{onClick:t[9]||(t[9]=(...e)=>L.hideModal&&L.hideModal(...e)),type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"}," TUTUP ")])])])])],64)}a("b7ef");var $=a("3822"),U=a("5b2c"),R=a("6f85"),z=a("8398"),G=a("8d31"),q=a("c3b3"),J=a("b9fb"),Z=a("5141"),H=(a("1465"),a("0ba9")),K=a("c416"),Q=a("c055"),W={name:"Persentasi Anggaran",data(){return{v$:Object(q["a"])(),token:sessionStorage.getItem("token"),modal:null,ListPersentasi:null,rowSMataAnggaran:null,rowDepartemen:null,rowAnggaran:null,filters:{kdsubmatanggaran:"",kddepartemen:"",cari:"",tahun:""},pagination:{perPage:12,currentPage:1,totaldata:0},Form:{bulan:"",presentasi:"",userid:"",tahun:""},preview:{subMataAnggaran:"",nominal:""},loading:!0,batasPersen:100,userSession:JSON.parse(atob(sessionStorage.getItem("dataUser")))}},validations(){return{Form:{bulan:{required:J["d"]},presentasi:{required:J["d"]},tahun:{required:J["d"]}}}},components:{DataTable:U["a"],Column:R["a"],InputText:z["a"],VueDatePicker:Z["a"],InputNumber:$["a"]},computed:{getAllData(){return this.ListPersentasi},getSMataAnggaran(){return this.rowSMataAnggaran},getDepartemen(){return this.rowDepartemen},getAnggaran(){return this.rowAnggaran}},methods:{cariData(){this.refreshListTable(1)},paginationTable(e){this.pagination.perPage=e.rows,this.pagination.currentPage==e.page?this.pagination.currentPage++:this.pagination.currentPage-e.page==1?this.pagination.currentPage--:this.pagination.currentPage=e.page+1,this.refreshListTable()},calculationSisa(e){this.Form.sisanominal=Number(this.preview.nominal)-e},calculationNominal(e){if(e.value>this.batasPersen)return this.Form.presentasi=this.batasPersen,this.$swal({icon:"info",title:"Pemberitahuan",text:"Tidak boleh lebih dari sisa persen :"+this.batasPersen+"%",confirmButtonColor:"#e77817"});this.Form.presentasi=e.value},async getAllAnggaran(){let e={idanggaran:""};try{let t=await H["a"].getIdAnggaran(e,this.token);this.rowAnggaran=t.data.data}catch(t){console.log(t)}},async getAllDepartemen(){let e={entitas:"",status:""};try{let t=await Q["a"].getDataDepartemen(e,this.token);this.rowDepartemen=t.data.data}catch(t){this.$swal({icon:"error",title:"GAGAL",text:t.response.data.Msg,confirmButtonColor:"#e77817"})}},async getSubMataAnggaran(){let e={kdkelmatanggaran:"",kdmatanggaran:""};try{let t=await K["a"].getDataSubMataAnggaran(e,this.token);this.rowSMataAnggaran=t.data.data}catch(t){this.rowSMataAnggaran=null,console.log(t)}},showInput(){this.Form={bulan:"",presentasi:"",userid:"",tahun:""};const e=document.getElementById("input-modal");this.modal=new G["a"](e),this.modal.show()},showPreview(){this.preview={nominal:this.Form.id_anggaran.susunan_anggaran}},async getData(){this.loading=!0;let e={perPage:this.pagination.perPage,currentPage:this.pagination.currentPage,cari:this.filters.cari,tahun:this.filters.tahun};try{let t=await H["a"].getListPresentasiAnggaran(e,this.token);this.pagination.totaldata=t.data.data.total_data,this.ListPersentasi=t.data.data.data;let a=0;for(let e=0;e<t.data.data.data.length;e++)a=Number(a)+Number(t.data.data.data[e].presentasi);console.log(Number(a)),this.batasPersen=100,this.batasPersen=Number(this.batasPersen)-Number(a),console.log(this.batasPersen),this.loading=!1}catch(t){this.ListPersentasi=null,this.loading=!1,console.log(t)}},async prosesInput(){let e=this.Form;e.userid=this.userSession.username,e.tahun=this.Form.bulan.year.toString();let t=this.Form.bulan.month+1;if(console.log(this.Form.bulan),e.bulan=t>=10?t.toString():"0"+t.toString(),this.v$.$validate(),!this.v$.$error)try{let t=await H["a"].inputPersentasiAnggaran(e,this.token);this.modal.hide(),this.$swal({icon:"success",title:"Berhasil",text:t.data.Msg,confirmButtonColor:"#e77817"}),this.Form={bulan:"",presentasi:"",userid:"",tahun:""},this.refreshListTable(),this.getAllAnggaran()}catch(a){this.$swal({icon:"error",title:"Gagal",text:a.response.data.Msg,confirmButtonColor:"#e77817"})}},hideModal(){this.modal.hide()},refreshListTable(e=0){0!=e&&(this.pagination.currentPage=1),this.getData()}},mounted(){Object(G["b"])(),this.getData(),this.getSubMataAnggaran(),this.getAllDepartemen(),this.getAllAnggaran()}},X=(a("4d77"),a("6b0d")),Y=a.n(X);const ee=Y()(W,[["render",L]]);t["default"]=ee},c055:function(e,t,a){"use strict";var r=a("7ba7");class n{getDataDepartemen(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/getdepartemen",e,a)}tambahDataDepartemen(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/insdepartemen",e,a)}updateDepartemen(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/updatedepartemen",e,a)}deleteDepartemen(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/deldepartemen",e,a)}ubahStatus(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/updatestatusdepart",e,a)}}t["a"]=new n},c416:function(e,t,a){"use strict";var r=a("7ba7");class n{getDataSubMataAnggaran(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/getsubmatanggaran",e,a)}tambahDataSubMataAnggaran(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/inssubmatanggaran",e,a)}updateSubMataAnggaran(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/updatesubmatanggaran",e,a)}deleteSubMataAnggaran(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/delsubmatanggaran",e,a)}ubahStatus(e,t){var a={headers:{"x-access-token":t}};return r["a"].post("referensi/updatestatusubmatanggaran",e,a)}}t["a"]=new n}}]);
//# sourceMappingURL=chunk-410229ee.a09cf3e0.js.map